<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="Microsoft.Help.SelfBranded" content="true" /><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Locale" content="en-us" /><meta name="Microsoft.Help.TopicLocale" content="en-us" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"></script><title>Adaption of old AMLEgine</title><meta name="Title" content="Adaption of old AMLEgine" /><meta name="Microsoft.Help.Id" content="adaption" /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="Description" content="Select the appropriate migration strategy" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.5.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="SetDefaultLanguage('cs');"><input type="hidden" id="userDataCache" class="userDataStyle" /><div id="PageHeader" class="pageHeader">The AutomationML Engine<form id="SearchForm" method="get" action="#" onsubmit="TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0" data-childrenloaded="true"><a class="tocExpanded" onclick="Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/welcome.htm" title="The AutomationML Engine" tocid="roottoc">The AutomationML Engine</a></div><div class="toclevel1" data-toclevel="1"><a data-tochassubtree="false" href="../html/welcome.htm" title="Introduction to the AutomationML Engine" tocid="welcome">Introduction to the AutomationML Engine</a></div><div class="toclevel1" data-toclevel="1"><a class="tocCollapsed" onclick="Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/Version history.htm" title="Version History" tocid="Version history">Version History</a></div><div class="toclevel1" data-toclevel="1"><a class="tocCollapsed" onclick="Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/R_Project_AMLEngineDocumentation.htm" title="The AutomationML Engine Reference Guide" tocid="R_Project_AMLEngineDocumentation">The AutomationML Engine Reference Guide</a></div><div class="toclevel1" data-toclevel="1"><a data-tochassubtree="false" href="../html/basic.htm" title="Basic code examples" tocid="basic">Basic code examples</a></div><div class="toclevel1" data-toclevel="1"><a data-tochassubtree="false" href="../html/service.htm" title="Advanced document processing using services" tocid="service">Advanced document processing using services</a></div><div class="toclevel1" data-toclevel="1"><a data-tochassubtree="false" href="../html/queries.htm" title="Query Examples" tocid="queries">Query Examples</a></div><div class="toclevel1" data-toclevel="1"><a data-tochassubtree="false" href="../html/validation.htm" title="Document Validation" tocid="validation">Document Validation</a></div><div class="toclevel1 current" data-toclevel="1"><a data-tochassubtree="false" href="../html/adaption.htm" title="Adaption of old AMLEgine" tocid="adaption">Adaption of old AMLEgine</a></div><div class="toclevel1" data-toclevel="1"><a data-tochassubtree="false" href="../html/changes.htm" title="CAEX 3.0 Changes" tocid="changes">CAEX 3.0 Changes</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div id="TopicContent" class="topicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/logoShade.png" /></td><td class="titleColumn"><h1>Adaption of old AMLEgine</h1></td></tr></table><h3>Adaption of legacy code based on AMLEngine v3.x.x and ALTOVA DLLs</h3><div><ol><li><p>Select the appropriate migration strategy</p><p>
              At first, the suitable migration strategy has to be decided. There are two possible migration strategies. The selection of the appropriate migration strategy depends
              on the code to be migrated. If there are large dependencies on the underlying memory model of the Altova Engine, which is based on the .NET System.Xml namespace,
              it might be better to use the adaption features, provided in the new <a href="N_Aml_Engine_Adapter.htm">Aml.Engine.Adapter</a> namespace.              
              If you mainly use the base classes of the CAEX_ClassModel namespace, direct migration can take place without using the special adapter classes,
			  to avoid getting the obsolete warnings during building.
            </p></li><li><p>Direct Migration</p><p><ul><li><p>
                    The namespaces, defined in the AMLEngine v3.xx have to be replaced:
                    Replace <strong>CAEX_ClassModel</strong> with	<a href="N_Aml_Engine_CAEX.htm">Aml.Engine.CAEX</a> and  <a href="N_Aml_Engine_CAEX_Extensions.htm">Aml.Engine.CAEX.Extensions</a>.
                    Replace <strong>AMLEngineExtensions</strong> with  	<a href="N_Aml_Engine_AmlObjects.htm">Aml.Engine.AmlObjects</a> and		<a href="N_Aml_Engine_AmlObjects_Extensions.htm">Aml.Engine.AmlObjects.Extensions</a>.
               
                  To use special services like FastAccess Methods, Split and Merge or Document validation the additional namespace <a href="N_Aml_Engine_Services.htm">Aml.Engine.Services</a> has to be included. 
                  The Schema Transformation service, which can be used to transform AutomationML documents from version 2.0 to version 2.10 (based on CAEX3.0) is also provided in the Aml.Engine.Services namespace.

                </p></li><li><p>
                    All Altova namespaces must be removed, because the AMLEngine2.1 is not generated using Altova software anymore. If Altova types are used in your code these types must be replaced manually. The formerly used base class for all CAEX objects was <strong>Altova.Xml.TypeBase</strong>. This class is replaced
                    with the class <a href="T_Aml_Engine_CAEX_CAEXWrapper.htm">CAEXWrapper</a>.
                    Any usages of member element types like <strong>MemberElement_InternalElement</strong> in iterations or declarations can mostly be replaced by a var declaration or the concrete element type like InternalElementType.
                    The <strong>CAEX_ClassModel.xs.anyType</strong> has to be replaced with the string type or – in the accessors of AdditonalInformation elements with the object type.
                    The underlying memory model in the Altova based classes depends on the <a href="https://docs.microsoft.com/dotnet/api/system.xml" target="_parent" rel="noopener noreferrer">System.Xml</a>   namespace. The AMLEngine2.1 is based on the <a href="https://docs.microsoft.com/dotnet/api/system.xml.linq" target="_parent" rel="noopener noreferrer">System.Xml.Linq</a>   namespace. 
                    If there are dependencies in your application code to the System.Xml namespace replace and change these dependencies using the System.Xml.Linq namespace. In most cases, you can try to substitute the classes:
                    <ul><li><p>XmlNode =&gt; XElement</p></li><li><p>XmlAttribute =&gt; XAttribute</p></li><li><p>XmlDocument =&gt; XDocument</p></li></ul></p></li><li><p>
                    The old engine always uses classes as wrappers to access XML attributes. In the new engine, attributes like <a href="P_Aml_Engine_CAEX_ICAEXObject_ID.htm">ID</a> or 
                    <a href="P_Aml_Engine_CAEX_ICAEXObject_Name.htm">Name</a> are directly accessible as value types.
                    Also XML elements representing single values like Description are accessible as value types. The consequence is, that there exist no member accessors for these CAEX attributes and elements.
                    A formerly coded assignment like element.Name.Value=”IE” has to be replaced by element.Name=”IE”.
                    An existence test like element.Name.Exists() has to be replaced by !string.IsNullOrEmpty(element.Name).
                  </p></li><li><p>
                    Access to specific AMLObjects and specific AMLAttributes has been modified. The new engine doesn't mix AMLAttributes with basic CAEX classes. As an example you cannot access a FrameAttribute using a defined property of an InternalElement.
                    To access specific AML Attributes or AML Objects implicit or explicit type conversion methods are provided. The SystemUnitClass defines this implicit type conversion operator:
                    <a href="M_Aml_Engine_CAEX_SystemUnitClassType_op_Implicit.htm"><span id="LSTB6EB2C87_0" data-languageSpecificText="cs=Implicit|vb=Widening|cpp=Implicit|nu=Implicit|fs=Implicit"></span></a>
                    for the <a href="T_Aml_Engine_AmlObjects_ObjectWithAMLAttributes.htm">ObjectWithAMLAttributes</a> defining all specific Attributes. To access a <a href="P_Aml_Engine_AmlObjects_ObjectWithAMLAttributes_FrameAttribute.htm">FrameAttribute</a> of an InternalElement, use a Type cast
                    like: ((ObjectWithAMLAttributes)internalElment).FrameAttribute.
                  </p></li></ul></p></li></ol></div></div></div><div id="PageFooter" class="pageFooter"><p><a href="https://www.automationml.org" target="_blank" rel="noopener noreferrer">Copyright © AutomationML e.V. 2017-2022</a></p><div class="feedbackLink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:office%40AutomationML.org?Subject=The%20AutomationML%20Engine">AutomationML office</a></div>
        <script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        </script></div></body></html>